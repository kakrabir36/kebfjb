import{p as j,_ as ee,i as te}from"./windi.60a87cd3.js";import{o as G,c as K,a as F,b as d,E as R,r as $,d as x,w as L,e as D,t as q,f as ae,i as re,p as ie}from"./vendor.9462d1b9.js";const ne={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1200 1200"},oe=F("path",{d:"M30.702 440.542V92.705C33.358 39.559 76.183.64 123.407 0h347.836c55.938 3.476 122.726 25.407 158.596 65.89l514.859 573.089c32.341 40.942 33.256 97.599 0 131.778l-403 403c-39.514 35.748-98.47 34.227-131.779 0L96.591 599.137C59.17 554.944 31.218 495.859 30.702 440.542zm150.933-200.734c2.193 51.71 42.984 89.029 88.875 89.641c51.859-2.316 89.028-43.651 89.641-89.641c-2.283-51.883-43.829-88.273-89.641-88.875c-51.735 2.161-88.276 43.163-88.875 88.875z",fill:"currentColor"},null,-1),se=[oe];function le(e,a){return G(),K("svg",ne,se)}var ce={name:"el-tag",render:le};function ue(e){if(!e)return 0;const a=[0,0,0,0,0];return e>=365*24*3600&&(a[0]=parseInt(e/(365*24*3600)),e%=365*24*3600),e>=24*3600&&(a[1]=parseInt(e/(24*3600)),e%=24*3600),e>=3600&&(a[2]=parseInt(e/3600)-8,e%=3600),e>=60&&(a[3]=parseInt(e/60),e%=60),e>0&&(a[4]=e),a}function _e(e){const a=Math.round((new Date().getTime()+288e5)/1e3),t=ue(a-e);return`${t[1]}D  ${t[2]}H:${t[3]}M:${t[4]}S`}async function s(e){return new Promise((a,t)=>{try{chrome.storage.local.get(e,r=>{a(r[e])})}catch(r){t(r)}})}async function b(e){return new Promise((a,t)=>{try{chrome.storage.local.set(e,()=>{a()})}catch(r){t(r)}})}d.defaults.retry=30;d.defaults.retryDelay=6e3;d.defaults.shouldRetry=e=>e.message=="Network Error";d.interceptors.response.use(void 0,e=>{var a=e.config;if(!a||!a.retry||!a.shouldRetry||typeof a.shouldRetry!="function"||!a.shouldRetry(e)||(a.__retryCount=a.__retryCount||0,a.__retryCount>=a.retry))return Promise.reject(e);a.__retryCount+=1;var t=new Promise(function(r){setTimeout(function(){r()},a.retryDelay||1)});return t.then(function(){return d(a)})});async function Z(e){await b({service_url:e,service_url:e});var a;await d.get(e+"/twitter_config").then(i=>{a=i.data}).catch(i=>{console.log(i)});for(var t=0;t<a.length;t++){var r={},n=a[t];r[`${n.key}`]=n.value,localStorage.setItem(n.key,n.value),await b(r)}}async function Q(){const e=await s("screen_name");var a=await s("service_url");let t;return await d.get(a+"/twitter_host",{params:{screen_name:e}}).then(r=>{t=r.data,console.log(r)}).catch(r=>{console.log(r)}),t}async function M(e){let a;var t=await s("service_url");return await d.get(t+"/twitter_events",{params:e}).then(r=>{a=r.data}).catch(r=>{a=[],console.log(r)}),a}async function de(){const e=await s("screen_name"),a=await s("time");let t;return a?t=M({screen_name:e}):t=M({screen_name:e,time:Math.floor(new Date().getTime()/1e3)}),await b({time:Math.floor(new Date().getTime()/1e3)}),t}function X(e){return new Promise(a=>setTimeout(a,e))}function me(e,a){const t=Math.floor(Math.random()*(a-e+1))+e;return a==0?0:t}async function W(e){var a=await de();if(a&&a.length>0)for(var t=0;t<a.length;t++){var r=a[t];console.log(r);const _=me(1,e);try{const o=r.option_name;if(await X(_*60*1e3),o.startsWith("\u8F6C\u63A8")&&await ve(r),o.startsWith("\u8BC4\u8BBA\u597D\u53CB")&&await xe(r),o.startsWith("\u8BC4\u8BBA\u63A8\u6587")&&await Se(r),new String(o).startsWith("\u70B9\u8D5E")&&await ye(r),new String(o).startsWith("\u5173\u6CE8\u65B0\u589E\u597D\u53CB")&&await be(r),new String(o).startsWith("\u53D1\u9001\u63A8\u6587")&&await Le(r),new String(o).startsWith("\u4FEE\u6539\u8D44\u6599")){var n=await Q();await Je(r,n)}new String(o).startsWith("\u53D1\u9001\u79C1\u4FE1")&&await z(r),new String(o).startsWith("\u4E3B\u52A8\u4E92\u52A8")&&await De(r),new String(o).startsWith("\u5237\u65B0\u9875\u9762")&&await Fe(r),new String(o).startsWith("\u5F15\u7528\u63A8\u6587\u53D1\u9001")&&setTimeout(async function(){await Te(r)},1e3)}catch(o){const m=await s("logList");if(m){var i=JSON.parse(m);r.state="\u6267\u884C\u5931\u8D25",r.log=o,i.push(r),await b({logList:JSON.stringify(i)})}else{const f=[];r.state="\u6267\u884C\u5931\u8D25",r.log=o,f.push(r),await b({logList:JSON.stringify(f)})}}}}async function U(e){const a=await s("screen_name");let t;var r=await s("service_url");return await d.get(r+"/twitter",{params:{account:a,name:e}}).then(n=>{t=n.data}).catch(n=>{console.log(n),console.log("/twitter")}),t}async function A(){const e=await s("logList");if(e){var a=JSON.parse(e);return a.length>100&&(a=a.slice(a.length-100)),a.reverse()}return[]}async function we(e){var a=await s("lastRettweet");if(a){var t=await s("retweet_time"),r=t*60+a;r<new Date().getTime()/1e3&&(await b({executeTask:new Date().getTime()}),await W(e))}else await b({executeTask:new Date().getTime()}),await W(e)}async function k(e){try{await we(e)}catch(a){console.log("\u8C03\u7528execute\u65B9\u6CD5\u51FA\u9519\u4E86",a)}setTimeout(async function(){await k(e)},5*1e3*60)}async function H(e,a){const t=await s("screen_name");var r=await s("service_url");d.post(r+"/twitter_host",{screen_name:t,script_version:j.version,browser:e,host:a})}async function pe(){var e=await s("executeTask");return e}async function I(e,a,t){var r=await s("service_url"),n;return await d.request({url:r+"/send_content",params:{label:t,screen_name:e,event_url_id:a},method:"POST"}).then(i=>{n=i.data}).catch(i=>{console.log(i)}),n}async function T(e,a,t,r){var n=await s("service_url"),i;return await d.request({url:n+"/send_object",params:{label:e,screen_name:r,event_url_id:a,amount:t},method:"POST",timeout:12e4}).then(_=>{i=_.data}).catch(async _=>{X(2e4),_.message=="ERR_NETWORK"&&await T(e,a,t,r)}),i}async function ge(){var e=await s("service_url");await Ce(),await Z(e)}function he(){var e=localStorage.getItem("script_version");return e||(e=j.version),console.log(e),e}d.defaults.retry=30;d.defaults.retryDelay=6e3;d.defaults.shouldRetry=e=>e.message=="Network Error";d.interceptors.response.use(void 0,e=>{var a=e.config;if(!a||!a.retry||!a.shouldRetry||typeof a.shouldRetry!="function"||!a.shouldRetry(e)||(a.__retryCount=a.__retryCount||0,a.__retryCount>=a.retry))return Promise.reject(e);a.__retryCount+=1;var t=new Promise(function(r){setTimeout(function(){r()},a.retryDelay||1)});return t.then(function(){return d(a)})});async function fe(){const e=await s("header");let a;return await d.get("https://twitter.com/i/api/1.1/account/multi/list.json",{headers:e}).then(async t=>{console.log(t),a=t.data.users[0].screen_name,await b({screen_name:a}),await b({userId:t.data.users[0].user_id})}).catch(t=>{console.log(t)}),a}async function ve(e){if(e.is_action===1){const t=e.api_url,r=e.api_request_body,n=e.api_request_method_type,i=await s("header");i["content-type"]="application/json";const _=JSON.parse(r);_.variables=JSON.stringify(_.variables),await d.request({url:t,method:n,data:JSON.stringify(_),headers:i}).then(async o=>{e.log=o.data;const m=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",m){const v=JSON.parse(m);v.push(e),await b({logList:JSON.stringify(v)})}else{const v=[];v.push(e),await b({logList:JSON.stringify(v)})}await b({lastRettweet:new Date().getTime()/1e3});var f=await s("service_url"),h=await s("screen_name");await d.post(f+"/twitter_execute_record",{screen_name:h,tw_id:e.tw_id,execute_state:1})}).catch(o=>{console.log(o)})}}async function ye(e){const a=e.tw_id;if(await s(`dz${a}`))return;const r=await s("header");r["content-type"]="application/json";var n=e.api_request_body;await d.request({url:e.api_url,method:e.api_request_method_type,data:n,headers:r}).then(async i=>{e.log=i.data;const _=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",_){const m=JSON.parse(_);m.push(e),await b({logList:JSON.stringify(m)})}else{const m=[];m.push(e),await b({logList:JSON.stringify(m)})}const o={};o[`dz${a}`]=a,await b(o)}).catch(i=>{console.log(i)})}async function be(e){const a=e.api_request_body,t=JSON.parse(a).user_id;if(await s(`gz${t}`))return;const n=e.api_url,i=e.api_request_method_type;var _=await s("header");_["Content-Type"]="application/x-www-form-urlencoded",console.log(a),await d.request({url:n,method:i,params:JSON.parse(a),headers:_}).then(async o=>{e.log=o.data;const m=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",m){const h=JSON.parse(m);h.push(e),await b({logList:JSON.stringify(h)})}else{const h=[];h.push(e),await b({logList:JSON.stringify(h)})}const f={};f[`gz${t}`]=JSON.parse(a).user_id,await b(f)}).catch(o=>{console.log(o)})}async function xe(e){if(e.is_action===1){const h=e.api_url,v=e.api_request_body,S=e.api_request_method_type,O=await s("header");O["content-type"]="application/json";const p=JSON.parse(v),N=e.number_friends;var t=await s("screen_name");if(e.content_tag){var r=new String(e.content_tag).split(","),n="";for(let l=0;l<r.length;l++){const c=r[l];var i=await I(t,e.id,c);n=`${n}${i.content}`}p.variables.tweet_text=n}if(e.send_content_tag){if(e.number_friends){var _=await T(e.send_content_tag,e.id,e.number_friends,t),o="";for(let l=0;l<_.length;l++){var m=_[l].screen_name;o=`${o}@${m}   `}var f=p.variables.tweet_text;p.variables.tweet_text=`${f}
${o}`}}else if(N){const l=await U("friends");if(l){const c=l.value,g=new String(c).split(",");let y="",C=g.length;if(e.number_friends){e.number_friends<=g.length&&(C=e.number_friends);for(let J=0;J<C;J++){const P=g[J];y=`${y}  @${P}   `}p.variables.tweet_text=`${p.variables.tweet_text}  ${y}
`}}else return}else return;if(e.parameter){const c=new String(e.parameter).split(",");let w="";for(let g=0;g<c.length;g++){const y=c[g],C=await U(y);w=`${w}
${C.value}`}p.variables.tweet_text=`${p.variables.tweet_text}${w}`}p.variables=JSON.stringify(p.variables),await d.request({url:h,method:S,data:JSON.stringify(p),headers:O}).then(async l=>{e.log=l.data;const c=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",c){const y=JSON.parse(c);y.push(e),await b({logList:JSON.stringify(y)})}else{const y=[];y.push(e),await b({logList:JSON.stringify(y)})}var w=await s("service_url"),g=await s("screen_name");await d.post(w+"/twitter_execute_record",{screen_name:g,tw_id:e.tw_id,execute_state:1})}).catch(l=>{console.log(l)})}}async function Se(e){if(e.is_action===1){const S=e.api_url,O=e.api_request_body,p=e.api_request_method_type,N=await s("header");N["content-type"]="application/json";var t=JSON.parse(O),r=await s("screen_name");if(e.content_tag){var n=new String(e.content_tag).split(","),i="";for(let l=0;l<n.length;l++){const c=n[l];var _=await I(r,e.id,c);i=`${i}${_.content}`}t.variables.tweet_text=i}if(e.send_content_tag&&e.number_friends){var o=await T(e.send_content_tag,e.id,e.number_friends,r),m="";for(let l=0;l<o.length;l++){var f=o[l].screen_name;m=`${m} @${f}  `}var h=t.variables.tweet_text;t.variables.tweet_text=`${h}
${m}`}if(e.parameter){const c=new String(e.parameter).split(",");let w=t.variables.tweet_text;for(let g=0;g<c.length;g++){const y=c[g],C=await U(y);w=`${w}
${C.value}`}t.variables.tweet_text=w}var v=await Oe(e);v.length>0&&(t.variables.media.media_entities=v),t.variables=JSON.stringify(t.variables),await d.request({url:S,method:p,data:JSON.stringify(t),headers:N}).then(async l=>{e.log=l.data;const c=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",c){const y=JSON.parse(c);y.push(e),await b({logList:JSON.stringify(y)})}else{const y=[];y.push(e),await b({logList:JSON.stringify(y)})}var w=await s("service_url"),g=await s("screen_name");await d.post(w+"/twitter_execute_record",{screen_name:g,tw_id:e.tw_id,execute_state:1})}).catch(l=>{console.log(l)})}}async function Ne(e){if(e.is_action===1){const v=e.api_url,S=e.api_request_body,O=e.api_request_method_type,p=await s("header");p["content-type"]="application/json";var t=JSON.parse(S),r=await s("screen_name");if(e.content_tag){var n=new String(e.content_tag).split(","),i="";for(let N=0;N<n.length;N++){const l=n[N];var _=await I(r,e.id,l);N==n.length/2&&e.send_content_tag&&(i=`${i} # ${_.content}`),i=`${i}${_.content}`}t.variables.tweet_text=i}if(e.send_content_tag&&e.number_friends){var o=await T(e.send_content_tag,e.id,e.number_friends,r),m=`
`;for(let N=0;N<o.length;N++){var f=o[N].screen_name;m=`${m} @${f}   `}var h=t.variables.tweet_text;t.variables.tweet_text=new String(h).replace("#",m+`
`)}if(e.parameter){const l=new String(e.parameter).split(",");let c=t.variables.tweet_text;for(let w=0;w<l.length;w++){const g=l[w],y=await U(g);c=`${c}
${y.value}`}t.variables.tweet_text=c}t.variables.tweet_text=`@${e.screen_name}
 ${t.variables.tweet_text}`,t.variables=JSON.stringify(t.variables),await d.request({url:v,method:O,data:JSON.stringify(t),headers:p}).then(async N=>{e.log=N.data;const l=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",l){const g=JSON.parse(l);g.push(e),await b({logList:JSON.stringify(g)})}else{const g=[];g.push(e),await b({logList:JSON.stringify(g)})}var c=await s("service_url"),w=await s("screen_name");await d.post(c+"/twitter_execute_record",{screen_name:w,tw_id:e.tw_id,execute_state:1})}).catch(N=>{console.log(N)})}}async function Le(e){if(e.is_action===1){const v=e.api_url,S=e.api_request_body,O=e.api_request_method_type,p=await s("header");p["content-type"]="application/json";var t=JSON.parse(S);const N=e.number_friends;var r=await s("screen_name");if(e.content_tag){var n=new String(e.content_tag).split(","),i="";for(let l=0;l<n.length;l++){const c=n[l];var _=await I(r,e.id,c);l==n.length/2&&e.send_content_tag&&(i=`${i} # ${_.content}`),i=`${i}${_.content}`}t.variables.tweet_text=i}if(e.send_content_tag){if(e.number_friends){var o=await T(e.send_content_tag,e.id,e.number_friends,r),m=`
`;for(let l=0;l<o.length;l++){var f=o[l].screen_name;m=`${m}  @${f}`}var h=t.variables.tweet_text;console.log("text:"+h),t.variables.tweet_text=new String(h).replace("#",m+`
`)}}else if(N){const l=await U("friends");if(l){const c=l.value,g=new String(c).split(",");let y="",C=g.length;if(e.number_friends){C=e.number_friends;for(let J=0;J<C;J++){const P=g[J];y=`${y}@${P}   `}t.variables.tweet_text=`${t.variables.tweet_text}  ${y}
`}}}if(e.parameter){const c=new String(e.parameter).split(",");let w="";for(let g=0;g<c.length;g++){const y=c[g],C=await U(y);w=`${w}
${C.value}`}t.variables.tweet_text=`${t.variables.tweet_text}${w}`}t.variables=JSON.stringify(t.variables),await d.request({url:v,method:O,data:JSON.stringify(t),headers:p}).then(async l=>{e.log=l.data;const c=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",l.data.data&&(e.tw_id=l.data.data.create_tweet.tweet_results.result.rest_id,e.screen_name=l.data.data.create_tweet.tweet_results.result.core.user_results.result.legacy.screen_name),c){const y=JSON.parse(c);y.push(e),await b({logList:JSON.stringify(y)})}else{const y=[];y.push(e),await b({logList:JSON.stringify(y)})}var w=await s("service_url"),g=await s("screen_name");await d.post(w+"/twitter_execute_record",{screen_name:g,tw_id:e.tw_id,execute_state:1})}).catch(l=>{console.log(l)})}}async function Oe(e){var a=e.api_request_body,t=JSON.parse(a),r=new Array;if(t.variables.media){var n=t.variables.media.media_entities;if(n.length>0)for(let i=0;i<n.length;i++){const _=await s("header");await d.request({url:n[i],responseType:"blob"}).then(async o=>{var m=o.data,f=o.headers["content-length"];_["content-type"]="application/x-www-form-urlencoded",await d.request({url:"https://upload.twitter.com/i/media/upload.json",method:"POST",params:{command:"INIT",total_bytes:f,media_type:"image/jpeg",media_category:"tweet_image"},headers:_}).then(async h=>{var v=h.data.media_id_string;const S=new FormData;S.append("media",m,"1.jpg"),_["content-type"]="multipart/form-data",await d.request({url:`https://upload.twitter.com/i/media/upload.json?command=APPEND&media_id=${v}&segment_index=0`,method:"POST",data:S,headers:_}),await d.request({url:`https://upload.twitter.com/i/media/upload.json?command=FINALIZE&media_id=${v}`,method:"POST",headers:_}).then(O=>{var p=O.data.media_id_string,N={media_id:p,tagged_users:[]};r[i]=N}).catch(O=>{console.log(O)})})})}}return r}async function Ce(){const e=await s("header");var a;if(await d.get("https://twitter.com/i/api/1.1/account/multi/list.json",{headers:e}).then(r=>{a=r.data}).then(r=>{console.log(r)}),a){var t=a.users[0].is_suspended;return t?(d.post("https://t1api.towfund.com/m/towfund/api/task/twitter_action",{data:JSON.stringify({account:u.screen_name,action:"suspended",state:0,remark:"\u8D26\u53F7\u88AB\u6682\u505C\u4E86"})}),!0):!1}}function E(e){return new Promise(a=>setTimeout(a,e))}async function Je(e,a){var t=JSON.parse(e.api_request_body);const r=await s("header");r["content-type"]="application/x-www-form-urlencoded";var n=new String(a.password),i=n.substring(1,i.length),_=await s("service_url"),o;if(await d.get(_+"/twitter_reg").then(async f=>{o=f.data}),t.head){var m=await Y(o.profile_image_url_https);t.head.data.media_id=m,d.request({url:t.head.url,method:t.head.method,data:t.head.data,headers:r}).then(f=>{console.log(f)}).catch(f=>{console.log(f)})}if(t.back){var m=await Y(o.profile_banner_url);t.back.data.media_id=m,d.request({url:t.back.url,method:t.back.method,data:t.back.data,headers:r}).then(h=>{console.log(h)}).catch(h=>{console.log(h)})}t.profile,t.pwd&&(params={current_password:i,password:"",password_confirmation:""},t.pwd.data=params,d.request({url:t.pwd.url,method:t.pwd.method,data:t.pwd.data,headers:r}).then(f=>{console.log(f)}).catch(f=>{console.log(f)}))}async function Y(e){var a;const t=await s("header");return await d.request({url:e,responseType:"blob"}).then(async r=>{var n=r.data,i=r.headers["content-length"];t["content-type"]="application/x-www-form-urlencoded",await d.request({url:"https://upload.twitter.com/i/media/upload.json",method:"POST",params:{command:"INIT",total_bytes:i,media_type:"image/jpeg"},headers:t}).then(async _=>{var o=_.data.media_id_string;const m=new FormData;m.append("media",n,"1.jpg"),t["content-type"]="multipart/form-data",await d.request({url:`https://upload.twitter.com/i/media/upload.json?command=APPEND&media_id=${o}&segment_index=0`,method:"POST",data:m,headers:t}),await d.request({url:`https://upload.twitter.com/i/media/upload.json?command=FINALIZE&media_id=${o}`,method:"POST",headers:t}).then(f=>{var h=f.data.media_id_string;a=h}).catch(f=>{console.log(f)})})}),a}function qe(){for(var e=[],a="0123456789abcdef",t=0;t<36;t++)e[t]=a.substr(Math.floor(Math.random()*16),1);e[14]="4",e[19]=a.substr(e[19]&3|8,1),e[8]=e[13]=e[18]=e[23]="-";var r=e.join("");return r}async function z(e){var a=await s("header"),t,r,n,i;if(await d.request({url:"https://twitter.com/i/api/graphql/Bhlf1dYJ3bYCKmLfeEQ31A/UserByScreenName",params:{variables:{screen_name:e.screen_name,withSafetyModeUserFields:!0,withSuperFollowsUserFields:!0}},headers:a,method:"GET"}).then(p=>{t=p.data.data.user.result.legacy.can_dm,r=p.data.data.user.result.legacy.following,n=p.data.data.user.result.legacy.can_media_tag,i=p.data.data.user.result.legacy}).catch(p=>{console.log(p)}),!(!t||r||!n||i.followed_by||i.follow_request_sent||i.verified)){var _=e.api_request_body,o=JSON.parse(_);a["content-type"]="application/x-www-form-urlencoded",o.request_id=qe();var m=await s("screen_name");if(o.text){var f=new String(o.text).split(","),h="";for(let p=0;p<f.length;p++){var v=f[p],S=await I(m,e.id,v);h=`${h} ${S.content}`}o.text=`${e.screen_name}
${h}`}var O=await s("userId");o.conversation_id=`${o.conversation_id}-${O}`,console.log(2),d.request({url:e.api_url,method:e.api_request_method_type,params:o,headers:a}).then(async p=>{e.log=p.data;const N=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",N){const w=JSON.parse(N);w.push(e),await b({logList:JSON.stringify(w)})}else{const w=[];w.push(e),await b({logList:JSON.stringify(w)})}var l=await s("service_url"),c=await s("screen_name");await d.post(l+"/twitter_execute_record",{screen_name:c,tw_id:e.tw_id,execute_state:1})}).catch(p=>{console.log(p)})}}async function De(e){var a=e.api_request_body,t=JSON.parse(a),r=await s("screen_name"),n=[];try{if(B(e,1,"\u4E92\u52A8\u5F00\u59CB",""),t.pl){var i=t.pl.param,_=i.send_obj,o=i.amount,m=i.content_tag,f=t.pl.tw,h=await s("comment_time");for(let p=0;p<o;p++){await E(h*60*1e3);var v=(await T(_,e.id,1,r))[0];console.log(v),n.push(v),f.param.variables.userId=v.user_id;var S=await $e(f);if(S>0){var O=t.pl.pl;O.param.variables.reply.in_reply_to_tweet_id=S,O.param.variables.tweet_text=m,e.api_request_body=JSON.stringify(O.param),e.api_request_method_type=O.method,e.api_url=O.url,e.option_name="\u8BC4\u8BBA\u63A8\u6587",e.screen_name=v.screen_name,e.tw_id=S,e.content_tag=m,await Ne(e)}}}if(t.sx){var i=t.sx.param,_=i.send_obj,o=i.amount,m=i.content_tag;if(n.length<=0)for(let w=0;w<o;w++){var v=(await T(_,e.id,1,r))[0],h=await s("private_letter_time");await E(h*60*1e3),t.sx.sx.param.conversation_id=v.user_id,t.sx.sx.param.text=m,e.api_request_method_type=t.sx.sx.method,e.api_request_body=JSON.stringify(t.sx.sx.param),e.api_url=t.sx.sx.url,e.screen_name=v.screen_name,e.option_name="\u53D1\u9001\u79C1\u4FE1",console.log(e),await z(e)}else for(let w=0;w<n.length;w++){const g=n[w];var h=await s("private_letter_time");await E(h*60*1e3),t.sx.sx.param.conversation_id=g.user_id,t.sx.sx.param.text=m,e.api_request_method_type=t.sx.sx.method,e.api_request_body=JSON.stringify(t.sx.sx.param),e.api_url=t.sx.sx.url,e.screen_name=g.screen_name,e.option_name="\u53D1\u9001\u79C1\u4FE1",console.log(e),await z(e)}}B(e,2,"\u4E92\u52A8\u7ED3\u675F","")}catch(p){B(e,-1,"\u4E92\u52A8\u5931\u8D25",p)}}async function B(e,a,t,r){const n=await s("logList");if(e.create_date=new Date().toLocaleString(),e.log=r,e.state=t,n){const o=JSON.parse(n);o.push(e),await b({logList:JSON.stringify(o)})}else{const o=[];o.push(e),await b({logList:JSON.stringify(o)})}var i=await s("service_url"),_=await s("screen_name");await d.post(i+"/twitter_execute_record",{screen_name:_,tw_id:e.tw_id,execute_state:a}).catch(o=>{console.log(o)})}async function $e(e){var a=await s("header");a["content-type"]="application/json";var t=0;return await d.request({url:e.url,params:e.param,method:e.method,headers:a}).then(r=>{var n=r.data,i=n.data.user.result.timeline_v2.timeline.instructions[1].entries;if(i.length>2){var _=i[0];t=_.content.itemContent.tweet_results.result.rest_id}if(t==0&&n.data.user.result.timeline_v2.timeline.instructions.length==3){var _=n.data.user.result.timeline_v2.timeline.instructions[2].entry;t=_.content.itemContent.tweet_results.result.rest_id,console.log(_)}}).catch(r=>{console.log(r)}),t}async function Te(e){var a=await s("header"),t=e.send_content_tag,r=new String(t).split(",");a["content-type"]="application/json";var n=r[0],i=r[1],_=r[2],o=r[3],m=await s("screen_name"),f=e.api_request_body,h=JSON.parse(f);for(let c=0;c<_;c++){await E(n*60*1e3);var v=await T(o,e.id,i,m),S="";if(e.content_tag){var O=e.content_tag,p=O.split(",");for(let w=0;w<p.length;w++){const g=p[w];var N=await I(m,e.id,g),l=N.content;S=`${S}${l}`}}S=`${S}
`;for(let w=0;w<v.length;w++){const g=v[w];S=`${S} @${g.screen_name} `}h.variables.tweet_text=S,d.request({url:e.api_url,data:JSON.stringify(h),method:e.api_request_method_type,headers:a}).then(async w=>{e.log=w.data;const g=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F"+c,g){const J=JSON.parse(g);J.push(e),await b({logList:JSON.stringify(J)})}else{const J=[];J.push(e),await b({logList:JSON.stringify(J)})}var y=await s("service_url"),C=await s("screen_name");await d.post(y+"/twitter_execute_record",{screen_name:C,tw_id:e.tw_id,execute_state:1})}).catch(w=>{console.log(w)})}}async function Fe(e){fetch(e.api_url).then(async function(a){if(a.status===200){e.log="\u5237\u65B0\u6210\u529F";const n=await s("logList");if(e.create_date=new Date().toLocaleString(),e.state="\u6267\u884C\u6210\u529F",n){const i=JSON.parse(n);i.push(e),await b({logList:JSON.stringify(i)})}else{const i=[];i.push(e),await b({logList:JSON.stringify(i)})}var t=await s("service_url"),r=await s("screen_name");await d.post(t+"/twitter_execute_record",{screen_name:r,tw_id:e.tw_id,execute_state:1})}else return{}})}const Ue={data(){return{host:"",browser:"",interval:3,account:"\u63A8\u7279\u540D\u5B57\u7B49\u5F85\u83B7\u53D6....",timecount:"8D 23h:12m:56s",timer:NaN,logList:[],version:"",twitter_filter:0,btn:"\u542F\u52A8",serverUrl:"https://tw.ds2dhu.xyz/m/towfund/api/task",lastTime:"",logSize:0,pageSize:10}},mounted(){b({service_url:this.serverUrl});var e=localStorage.getItem("twitter_filter");e||(e=1,localStorage.setItem("twitter_filter",1)),this.twitter_filter=e;var a=localStorage.getItem("start_up");a||(a=1),a==1&&this.start()},beforeUnmount(){clearInterval(this.timer)},methods:{async startFilter(){var e=localStorage.getItem("twitter_filter");e||(e=0),e==0?(this.twitter_filter=1,localStorage.setItem("twitter_filter",this.twitter_filter)):(this.twitter_filter=0,localStorage.setItem("twitter_filter",this.twitter_filter))},handler(e,a,t,r){console.log(e);var n=new String(e.option_name);e.option_name==="\u5173\u6CE8\u65B0\u589E\u597D\u53CB"?window.open(`https://twitter.com/${e.screen_name}`):n.startsWith("\u53D1\u9001\u79C1\u4FE1")?window.open("https://twitter.com/messages"):window.open(`https://twitter.com/${e.screen_name}/status/${e.tw_id}`)},async handlerBlur(){document.title=this.browser,(this.browser||this.host)&&await H(this.browser,this.host)},copy(){const e=this.account,a=document.createElement("input");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("Copy"),this.$message({message:"\u590D\u5236\u6210\u529F",type:"success"}),a.remove()},async start(){if(this.account=await fe(),!this.account){R({message:"\u63A8\u7279\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",grouping:!0,type:"success"});return}this.version=j.version;const e=Math.round(new Date().getTime()/1e3);await Z(this.serverUrl);try{const t=await Q();if(t)this.host=t.host,this.browser=t.browser,document.title=this.browser,await H(this.browser,this.host);else{R({message:"\u4E3B\u673A\u4FE1\u606F\u83B7\u53D6\u5931\u8D25",grouping:!0,type:"success"});return}}catch(t){console.log(t)}this.btn="\u8FD0\u884C\u4E2D";var a=await A();this.logSize=a.length,this.logList=a.slice(0,10),k(this.interval),this.timer||(this.timer=setInterval(async()=>{this.timecount=_e(e),this.lastTime=new Date(await pe()).toLocaleString()},1e3),setInterval(async()=>{var t=await A();this.logSize=t.length,this.logList=t.slice(0,10),this.version!=he()&&window.location.reload()},60*1e3*10),setInterval(async()=>{try{await ge()}catch(t){console.log(t)}},1e3*60*60))},async currentChange(e){var a=await A();this.logSize=a.length,this.logList=a.slice(0,10),a.length>e*10&&(this.logList=a.slice((e-1)*10,e*10))},async prevClick(e){if(this.logSize=a.length,e>0){var a=await A();this.logList=a.slice((e-1)*10,e*10)}},async nextClick(e){var a=await A();this.logSize=a.length,e*10<this.logList.length&&(this.logList=a.slice(e*10,e+1*10))}}},Ie={id:"content"},Ae=D(" \u590D\u5236 "),Ee={style:{display:"flex","align-items":"center"}},Pe={style:{"margin-left":"10px"}},Be={style:{display:"flex","align-items":"center"}},ze={style:{display:"flex","align-items":"center"}},je={style:{display:"flex","align-items":"center"}};function Ve(e,a,t,r,n,i){const _=$("el-input"),o=$("el-form-item"),m=$("el-button"),f=$("el-form"),h=$("timer"),v=$("el-icon"),S=$("el-table-column"),O=ce,p=$("el-popover"),N=$("el-table"),l=$("el-pagination");return G(),K("view",Ie,[x(f,{"label-width":"auto",inline:!0,"label-position":e.left,size:"size"},{default:L(()=>[x(o,{label:"Host\u7F16\u53F7"},{default:L(()=>[x(_,{modelValue:n.host,"onUpdate:modelValue":a[0]||(a[0]=c=>n.host=c),placeholder:"\u8BF7\u8F93\u5165Host\u7F16\u53F7",onBlur:i.handlerBlur},null,8,["modelValue","onBlur"])]),_:1}),x(o,{label:"\u6D4F\u89C8\u5668\u7F16\u53F7"},{default:L(()=>[x(_,{modelValue:n.browser,"onUpdate:modelValue":a[1]||(a[1]=c=>n.browser=c),placeholder:"\u8BF7\u8F93\u5165\u6D4F\u89C8\u5668\u7F16\u53F7",onBlur:i.handlerBlur},null,8,["modelValue","onBlur"])]),_:1}),x(o,{label:"\u4EFB\u52A1\u6267\u884C\u95F4\u9694\u65F6\u95F4"},{default:L(()=>[x(_,{modelValue:n.interval,"onUpdate:modelValue":a[2]||(a[2]=c=>n.interval=c),placeholder:"\u5355\u4F4D:\u79D2"},null,8,["modelValue"])]),_:1}),x(o,{label:"\u670D\u52A1\u5730\u5740"},{default:L(()=>[x(_,{modelValue:n.serverUrl,"onUpdate:modelValue":a[3]||(a[3]=c=>n.serverUrl=c),placeholder:"\u8BF7\u6C42\u5730\u5740,\u9ED8\u8BA4\u4E0D\u7528\u6539"},null,8,["modelValue"])]),_:1}),x(o,{label:"Twitter\u8D26\u53F7"},{default:L(()=>[x(m,{type:"success",onClick:i.copy},{default:L(()=>[Ae]),_:1},8,["onClick"]),D(" "+q(n.account),1)]),_:1}),x(o,{label:""},{default:L(()=>[x(m,{type:"success",onClick:i.start},{default:L(()=>[D(q(n.btn),1)]),_:1},8,["onClick"]),D(" "+q(n.timecount),1)]),_:1}),x(o,{label:"\u7248\u672C\u53F7"},{default:L(()=>[D(q(n.version),1)]),_:1}),x(o,{label:"\u4E0A\u6B21\u62C9\u53D6\u4EFB\u52A1\u65F6\u95F4"},{default:L(()=>[D(q(n.lastTime),1)]),_:1}),x(o,{label:"\u5173\u95EDTwiiter\u9875\u9762\u8BF7\u6C42"},{default:L(()=>[x(m,{type:"success",onClick:i.startFilter},{default:L(()=>[D(q(n.twitter_filter),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["label-position"]),x(N,{data:n.logList,style:{width:"100%"},onCellClick:i.handler},{default:L(()=>[x(S,{label:"\u63A8\u7279\u540D",width:"180"},{default:L(c=>[F("div",Ee,[x(v,null,{default:L(()=>[x(h)]),_:1}),F("span",Pe,q(c.row.screen_name),1)])]),_:1}),x(S,{label:"\u64CD\u4F5C\u884C\u4E3A"},{default:L(c=>[F("div",Be,[x(v,null,{default:L(()=>[x(h)]),_:1}),D(" "+q(c.row.option_name),1)])]),_:1}),x(S,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:L(c=>[x(p,{effect:"light",trigger:"hover",placement:"top",width:"auto"},{default:L(()=>[F("div",null,q(c.row.log),1)]),reference:L(()=>[x(O,null,{default:L(()=>[D(q(c.row.log),1)]),_:2},1024)]),_:2},1024)]),_:1}),x(S,{label:"\u64CD\u4F5C\u65F6\u95F4"},{default:L(c=>[F("div",ze,[x(v,null,{default:L(()=>[x(h)]),_:1}),D(" "+q(c.row.create_date),1)])]),_:1}),x(S,{label:"\u6267\u884C\u72B6\u6001"},{default:L(c=>[F("div",je,[x(v,null,{default:L(()=>[x(h)]),_:1}),D(" "+q(c.row.state),1)])]),_:1})]),_:1},8,["data","onCellClick"]),x(l,{small:"",background:"",layout:"prev, pager, next",total:n.logSize,class:"mt-4",onCurrentChange:i.currentChange,onPrevClick:i.prevClick,onNextClick:i.nextClick,"page-size":n.pageSize},null,8,["total","onCurrentChange","onPrevClick","onNextClick","page-size"])])}var Re=ee(Ue,[["render",Ve]]);const V=ae(Re);V.use(re);V.use(ie,d);V.use(te).mount("#app");
